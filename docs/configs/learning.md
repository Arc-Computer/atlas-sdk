# Learning Config Overrides

Atlas surfaces long-lived pamphlets generated by the learning synthesizer
through the student and teacher personas. The `learning` block in runtime
configs now exposes an `apply_to_prompts` flag to control whether these
pamphlets are injected into system prompts at runtime.

```yaml
learning:
  enabled: true
  update_enabled: true
  apply_to_prompts: true  # set to false to disable pamphlet injection
```

- **Default behaviour** – `apply_to_prompts` defaults to `true`, preserving the
  adaptive guidance generated by the synthesizer. Both student and teacher
  prompts include the cached pamphlet when the value is enabled.
- **Runtime override** – set the flag to `false` to keep the learning registry
  and session notes in sync without altering live prompts. This is useful when
  validating baseline model behaviour or comparing latency with/without
  adaptive context.
- **Prompt format** – pamphlets are prepended to the planner, executor, and
  synthesizer prompts for the student, and to the plan-review and validation
  prompts for the teacher. The injected block is wrapped by a lightweight
  delimiter (`>>> Student Playbook >>>`, `>>> Teacher Playbook >>>`) and is
  trimmed to ~1,000 characters for latency control. When metadata in
  `learning_state["metadata"]` includes timestamps or versions, the wrapper adds
  a single line summarising those details.
- **Caching** – the teacher’s plan cache and validation signature include a
  digest of the injected pamphlet. This prevents stale reviews when the
  pamphlet changes between sessions while keeping cache invalidation scoped to
  actual content updates.

When running the evaluation harnesses described in
`docs/runtime_eval.md` and `docs/learning_eval.md`, keep
`apply_to_prompts` enabled to confirm that adaptive guidance is applied end to
end. Disable the flag only after capturing baseline metrics for comparison.
